<project name="svn" default="svn.sensor">
  <description>
  Provides an Ant task to extract Commit data from a Subversion server, then send this data off to Hackystat.
</description>
  <import file="build.xml" />
  <property name="svn.repository.name" value="Hackystat" />
  <property name="svn.repository.url" value="https://hackystat-sensor-xmldata.googlecode.com/svn/trunk" />
  
  <!--
    Important Note:  This task will not work correctly unless the following properties are 
    given functional values on the command line using the -D syntax:
      ant -Dhackystat.default.username=... -Dhackystat.default.password=... -f svn.build.xml
    See the StackyHack User Guide for details.
  -->
  <property name="hackystat.default.account" value="defaultHackystatUser" />
  <property name="hackystat.default.password" value="defaultHackystatPassword" />

  <target name="svn.sensor" description="Sends Subversion commit data to Hackystat using the Subversion sensor.">
    <property environment="env" />
    <available file="${env.HACKYSTAT_ANTSENSORS_HOME}/antsensors.jar" type="file" property="hackystat.antsensors.available" />
    <fail message="${env.HACKYSTAT_ANTSENSORS_HOME}/antsensors.jar could not be found." unless="hackystat.antsensors.available" />
    <taskdef resource="antlib.xml" classpath="${env.HACKYSTAT_ANTSENSORS_HOME}/antsensors.jar" />

    <!-- Send Subversion data to Hackystat using the Subversion sensor. -->
    <hacky-svn repositoryName="${svn.repository.name}" repositoryUrl="${svn.repository.url}" userName="${svn.username}" password="${svn.password}" fromDate="2007-10-16" toDate="2007-11-16" defaultHackystatAccount="${hackystat.default.account}" defaultHackystatPassword="${hackystat.default.password}" verbose="${hackystat.verbose.mode}" />
  </target>
</project>